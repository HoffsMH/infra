#!/bin/zsh
# end a command with ; to run in a terminal

term="kitty"

zshhist=$(cat ~/.zsh_history | sed -r 's/( *: *[0-9]*:0;\*? *)|( *[0-9]*\*? *)//' )
# run=$(echo $zshhist | sed -r 's/( *: *[0-9]*:0;\*? *)|( *[0-9]*\*? *)//' | sed -r 's/\\/\\\\/g' | dmenu -i \
# -p "History:" \ "$@")

# run=$(echo $zshhist | sed -r 's/( *: *[0-9]*:0;\*? *)|( *[0-9]*\*? *)//' | sed -r 's/\\/\\\\/g')
# run=$(echo $zshhist)

# echo $zshhist
run=$(echo $zshhist | dmenu -i -p "History:" "$@")

case "$run" in
    *\;) exec $(echo trun "${run%;}") ;;
    *)   exec $(echo ${run%;}) ;;
esac
